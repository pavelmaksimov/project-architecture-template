repos:
  - repo: local
    hooks:
      - id: ruff-check
        stages: [pre-commit]
        name: ruff linter
        entry: ruff
        language: python
        args: [check, --fix, project]
        pass_filenames: false

  - repo: local
    hooks:
      - id: ruff-check-tests
        stages: [pre-commit]
        name: ruff linter for tests
        entry: ruff
        language: python
        args: [check, --fix, tests, --config, tests/ruff-tests.toml]
        pass_filenames: false

  - repo: local
    hooks:
      - id: black
        stages: [pre-commit]
        name: black
        entry: black
        language: python
        args: [project, tests]
        pass_filenames: false

  - repo: local
    hooks:
      - id: la-linter
        stages: [pre-commit, pre-push]
        name: Checking isolation layers and direction of dependencies
        entry: la-linter
        language: python
        args: [project, --no-check-no-layer]
        pass_filenames: false

  - repo: local
    hooks:
      - id: di-linter
        stages: [pre-commit]
        name: Checking dependency injections
        entry: di-linter
        language: python
        args: [project]
        pass_filenames: false

  - repo: local
    hooks:
      - id: update-deps
        stages: [pre-commit, pre-push]
        name: Update requirements.txt
        entry: uv export --all-groups --no-dev --no-hashes -o requirements.txt
        language: system
        pass_filenames: false

  - repo: local
    hooks:
      - id: update-dev-deps
        stages: [pre-commit, pre-push]
        name: Update requirements.dev.txt
        entry: uv export --no-hashes -o requirements.dev.txt --only-group dev
        language: system
        pass_filenames: false

  - repo: local
    hooks:
      - id: update-agents
        stages: [pre-commit]
        name: Update AGENTS.md from specs/rules
        entry: python scripts/update_agents.py
        language: system
        pass_filenames: false
